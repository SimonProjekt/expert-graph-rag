{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Expert Graph RAG - Recruiter Demo</title>
  <link rel="stylesheet" href="{% static 'ui/styles.css' %}">
</head>
<body>
  <main class="page landing-page">
    <header class="landing-hero panel">
      <p class="kicker">Ericsson Interview MVP</p>
      <h1>Expert Graph RAG</h1>
      <p class="landing-subtitle">
        A recruiter-grade demo for discovering telecom experts and research papers using hybrid
        semantic retrieval plus knowledge-graph reasoning.
      </p>

      <div class="landing-metrics" aria-label="Current dataset metrics">
        <article class="metric-card">
          <span class="metric-value">{{ metrics.papers }}</span>
          <span class="metric-label">Papers</span>
        </article>
        <article class="metric-card">
          <span class="metric-value">{{ metrics.experts }}</span>
          <span class="metric-label">Experts</span>
        </article>
        <article class="metric-card">
          <span class="metric-value">{{ metrics.topics }}</span>
          <span class="metric-label">Topics</span>
        </article>
        <article class="metric-card">
          <span class="metric-value">{{ metrics.chunks }}</span>
          <span class="metric-label">Embeddings</span>
        </article>
      </div>

      <div class="mode-badges" aria-label="Runtime status">
        {% if llm_enabled %}
          <span class="badge status-ok">LLM Enabled</span>
        {% else %}
          <span class="badge status-warn">Demo Mode (LLM Optional)</span>
        {% endif %}
        {% if openalex_live_fetch_enabled %}
          <span class="badge status-ok">Live OpenAlex enabled</span>
        {% else %}
          <span class="badge badge-outline">Local seed mode</span>
        {% endif %}
        <span class="badge badge-outline">Role: {{ session_role }}</span>
        {% if session_name %}
          <span class="badge badge-outline">User: {{ session_name }}</span>
        {% endif %}
      </div>

      <div class="landing-actions">
        <a class="primary-button landing-cta" href="/demo/">Try the Demo</a>
        <a class="button-link" href="{% url 'demo_login' %}?next=/demo/">Set Demo Role</a>
      </div>
    </header>

    <section class="panel">
      <h2>What This Project Can Do</h2>
      <div class="cards landing-capabilities">
        {% for capability in capabilities %}
          <article class="card">
            <h3>{{ capability.title }}</h3>
            <p>{{ capability.description }}</p>
          </article>
        {% endfor %}
      </div>
    </section>

    <section class="panel">
      <h2>2-Minute Tutorial</h2>
      <ol class="landing-steps">
        {% for step in tutorial_steps %}
          <li>{{ step }}</li>
        {% endfor %}
      </ol>
    </section>

    <section class="panel">
      <h2>How Relevance Works</h2>
      <ul class="list">
        <li><strong>Papers:</strong> semantic similarity + query alignment + graph authority + centrality.</li>
        <li><strong>Experts:</strong> semantic evidence + query alignment + recency + topic coverage + graph centrality.</li>
        <li><strong>Ask:</strong> grounded answer from retrieved chunks with citations and recommended experts.</li>
      </ul>
    </section>

    <section class="panel">
      <h2>Demo Flow for Recruiters</h2>
      <div class="cards landing-capabilities">
        {% for step in demo_flow %}
          <article class="card">
            <h3>{{ step.title }}</h3>
            <p>{{ step.description }}</p>
          </article>
        {% endfor %}
      </div>
    </section>

    <section class="panel">
      <h2>Try These Telecom Queries</h2>
      <p class="muted">Click any query to jump directly into the interactive demo.</p>
      <div class="chips">
        {% for sample in example_queries %}
          <a class="chip" href="/demo/?query={{ sample|urlencode }}&tab=papers&clearance=PUBLIC">{{ sample }}</a>
        {% endfor %}
      </div>
    </section>

    <section class="cards">
      <article class="panel">
        <h2>Seeded Trending Articles</h2>
        <ul class="list compact-list">
          {% for work in featured_works %}
            <li>
              <strong>{{ work.title }}</strong>
              <span class="muted">{% if work.published_date %}{{ work.published_date|date:"Y-m-d" }}{% else %}n/a{% endif %}</span>
            </li>
          {% empty %}
            <li>No seeded papers yet. Run <code>make demo_ready</code>.</li>
          {% endfor %}
        </ul>
      </article>

      <article class="panel">
        <h2>Seeded Experts</h2>
        <ul class="list compact-list">
          {% for expert in featured_experts %}
            <li>
              <a href="/experts/{{ expert.id }}/?clearance=PUBLIC">{{ expert.name }}</a>
              <span class="muted">{{ expert.institution_name }} Â· {{ expert.paper_count }} papers</span>
            </li>
          {% empty %}
            <li>No seeded experts yet. Run <code>make demo_ready</code>.</li>
          {% endfor %}
        </ul>
      </article>
    </section>

    <footer class="landing-footer">
      <a href="/healthz">Health Check</a>
      <a href="/demo/">Open Interactive Demo</a>
    </footer>
  </main>
</body>
</html>
