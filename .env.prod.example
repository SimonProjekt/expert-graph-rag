# Compose
COMPOSE_PROJECT_NAME=expert-graph-rag-prod

# Public domain + TLS email for Caddy
DEMO_DOMAIN=demo.example.com
CADDY_EMAIL=ops@example.com
BASIC_AUTH_USER=
BASIC_AUTH_PASSWORD_HASH=

# Django runtime
DJANGO_SETTINGS_MODULE=config.settings.production
DJANGO_SECRET_KEY=replace-with-a-long-random-secret
DEBUG=false
DJANGO_ALLOWED_HOSTS=demo.example.com
DJANGO_CSRF_TRUSTED_ORIGINS=https://demo.example.com
DJANGO_STATIC_ROOT=/app/staticfiles
LOG_LEVEL=INFO

# Gunicorn
GUNICORN_WORKERS=3
GUNICORN_TIMEOUT=120

# Postgres (pgvector)
POSTGRES_DB=expert_graph_rag
POSTGRES_USER=expert_user
POSTGRES_PASSWORD=change-me
DATABASE_URL=postgresql://expert_user:change-me@postgres:5432/expert_graph_rag

# Redis / Celery
REDIS_URL=redis://redis:6379/0
CELERY_BROKER_URL=redis://redis:6379/0
CELERY_RESULT_BACKEND=redis://redis:6379/1
CELERY_TASK_ALWAYS_EAGER=false
CELERY_TASK_TIME_LIMIT=300
CELERY_TASK_SOFT_TIME_LIMIT=240

# Neo4j (private network only in prod compose)
NEO4J_URI=bolt://neo4j:7687
NEO4J_USER=neo4j
NEO4J_PASSWORD=change-me

# Optional OpenAI: leave empty to keep demo mode (LLM disabled)
OPENAI_API_KEY=
OPENAI_MODEL=gpt-4o-mini
OPENAI_BASE_URL=
OPENAI_TEMPERATURE=0.1
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
# Backward-compatible alias (optional): OPENAI_ANSWER_MODEL

# OpenAlex (live fetch + ingestion)
OPENALEX_BASE_URL=https://api.openalex.org
OPENALEX_API_KEY=
OPENALEX_EMAIL=you@example.com
OPENALEX_MAILTO=you@example.com
OPENALEX_PAGE_SIZE=200
OPENALEX_HTTP_TIMEOUT_SECONDS=15
OPENALEX_MAX_RETRIES=3
OPENALEX_BACKOFF_SECONDS=1
OPENALEX_RATE_LIMIT_PER_SEC=5
OPENALEX_RATE_LIMIT_RPS=5
OPENALEX_SECURITY_LEVEL_RATIOS=70,20,10
OPENALEX_LIVE_FETCH=true
OPENALEX_LIVE_MIN_RESULTS=10
OPENALEX_LIVE_FETCH_LIMIT=40
OPENALEX_LIVE_FETCH_COOLDOWN_SECONDS=900
OPENALEX_CACHE_ENABLED=true
OPENALEX_CACHE_TTL_SECONDS=900

# Embedding defaults
EMBEDDING_BACKEND=auto
ALLOW_DETERMINISTIC_EMBEDDING_FALLBACK=true
LOCAL_EMBEDDING_MODEL=sentence-transformers/all-MiniLM-L6-v2

# Search / graph retrieval tuning
SEARCH_GRAPH_SEED_PAPERS=8
SEARCH_GRAPH_EXPANSION_LIMIT=40
SEARCH_GRAPH_HOP_LIMIT=2
